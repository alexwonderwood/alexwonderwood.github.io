/*
 Simpslider v1.0 - jQuery slider for web developers
 author : Pavel A. Hryshayeu
 author's email : gigatrop@gmail.com
 author's site : http://psdvhtml.com
 license : GPL
*/

(function(g){g.fn.simpslider=function(x){function s(){a=g.extend(a,x);a.itemsCount=a.slider.find(a.itemsSelector).length;if("fade"===a.effect){var c=a.mover.find(a.itemsSelector);c.css({position:"absolute",left:0,top:0,zIndex:a.itemsZ});c.eq(a.curID).css("z-index",a.itemsZ+1)}}function n(c,e){var d=a.mover.find(a.itemsSelector);d.css({opacity:0,zIndex:a.itemsZ});d.eq(e).css({opacity:1,zIndex:a.itemsZ+1});d.eq(c).css({opacity:0,zIndex:a.itemsZ+2});d.eq(c).animate({opacity:1},a.speed,a.easing,function(){h(c, e)})}function l(c){function e(){var b,f;"prev"!=a.touch.direction&&a.mover.prepend(a.mover.find(a.itemsSelector+":last"));if(a.horizontal){var e=c&&!a.touchSimple?a.touch.moveX-a.touch.x-a.moveWidth:-a.moveWidth;b=c&&!a.touchSimple?a.moveWidth-(a.touch.moveX-a.touch.x):a.moveWidth;f=0<b?a.speed:0;a.mover.css("left",e+"px").animate({left:"+="+b+"px"},f,a.easing,function(){h(a.curID,d)})}else e=c&&!a.touchSimple?a.touch.y-a.touch.moveY+a.moveHeight:a.moveHeight,b=c&&!a.touchSimple?a.moveHeight-(a.touch.moveY- a.touch.y):a.moveHeight,f=0<b?a.speed:0,a.mover.css("top","-"+e+"px").animate({top:"+="+b+"px"},f,a.easing,function(){h(a.curID,d)})}if(1!=a.itemsCount&&!a.moving&&(a.infinit||0!=a.curID)){a.moving=!0;a.direction="prev";var d=a.curID;a.curID--;a.idHistory.unshift(a.curID);0>a.curID&&(a.curID=a.itemsCount-1);a.willID=a.curID;null!==a.doBefore&&a.doBefore(a.willID,d);a.dots.removeClass(a.activeClass).eq(a.curID).addClass(a.activeClass);"move"===a.effect?e():"fade"===a.effect&&n(a.curID,d)}}function k(c){function e(){var b, f;a.horizontal?(b=c&&!a.touchSimple?a.moveWidth+(a.touch.moveX-a.touch.x):a.moveWidth,f=0<b?a.speed:0,a.mover.animate({left:"-="+b+"px"},f,a.easing,function(){a.mover.append(a.mover.find(a.itemsSelector+":first"));a.mover.css("left",0);h(a.curID,d)})):(b=c&&!a.touchSimple?a.moveHeight+(a.touch.moveY-a.touch.y):a.moveHeight,f=0<b?a.speed:0,a.mover.animate({top:"-="+b+"px"},f,a.easing,function(){a.mover.append(a.mover.find(a.itemsSelector+":first"));a.mover.css("top",0);h(a.curID,d)}))}if(1!=a.itemsCount&& !a.moving&&(a.infinit||a.curID!=a.itemsCount-a.visibleCount)){a.moving=!0;a.direction="next";var d=a.curID;a.curID++;a.idHistory.unshift(a.curID);a.curID>a.itemsCount-1&&(a.curID=0);a.willID=a.curID;null!==a.doBefore&&a.doBefore(a.willID,d);a.dots.removeClass(a.activeClass).eq(a.curID).addClass(a.activeClass);"move"===a.effect?e():"fade"===a.effect&&n(a.curID,d)}}function t(c,e){function d(){var c=a.curID-b;if(0>c){for(var d=-c,e=0;e<d;e++)a.mover.prepend(a.mover.find(a.itemsSelector+":eq("+(a.itemsCount- 1)+")"));a.horizontal?a.mover.css("left","-"+a.moveWidth*d+"px").animate({left:"0"},f,a.easing,function(){h(a.curID,b)}):a.mover.css("top","-"+a.moveHeight*d+"px").animate({top:"0"},f,a.easing,function(){h(a.curID,b)})}else a.horizontal?a.mover.animate({left:"+="+a.moveWidth*(b-a.curID)+"px"},f,a.easing,function(){0<c&&(a.mover.append(a.mover.find(a.itemsSelector).slice(0,c)),a.mover.css("left","0"));h(a.curID,b)}):a.mover.animate({top:"+="+a.moveHeight*(b-a.curID)+"px"},f,a.easing,function(){0<c&& (a.mover.append(a.mover.find(a.itemsSelector).slice(0,c)),a.mover.css("top","0"));h(a.curID,b)})}if(1!=a.itemsCount&&!a.moving){a.moving=!0;a.direction="to";var b=a.curID;a.curID=c;a.idHistory.unshift(a.curID);a.willID=a.curID;null!==a.doBefore&&a.doBefore(a.willID,b);var f=e?0:a.speed;a.dots.removeClass(a.activeClass).eq(a.curID).addClass(a.activeClass);"move"===a.effect?d():"fade"===a.effect&&n(a.curID,b)}}function h(c,e){a.moving=!1;p();null!==a.doAfter&&a.doAfter(c,e)}function p(){a.infinit|| (a.left.toggleClass(a.disabledClass,0==a.curID||a.itemsCount<a.visibleCount),a.right.toggleClass(a.disabledClass,a.curID==a.itemsCount-a.visibleCount||a.itemsCount<a.visibleCount))}function u(){a.left.hasClass(a.disabledClass)||l()}function v(){a.right.hasClass(a.disabledClass)||k()}function w(){t(g(this).index())}function q(){r();a.iterator=setInterval(k,a.wait)}function r(){a.iterator&&clearInterval(a.iterator)}var m=g(this),a={slider:m,moveWidth:m.width(),moveHeight:m.height(),mover:m.find(".mover"), left:m.find(".left"),right:m.find(".right"),autoStart:!0,speed:800,easing:"swing",wait:5E3,stopOnHover:!0,dots:$("#slider-controls").find("li"),itemsSelector:"img",horizontal:!0,doAfter:null,doBefore:null,visibleCount:1,infinit:!0,effect:"move",itemsZ:1,touchLength:50,touchSimple:!1,activeClass:"active",disabledClass:"disabled",direction:"",itemsCount:0,curID:0,willID:0,idHistory:[0],moving:!1,iterator:0,stopped:!1,touch:{started:!1,x:0,y:0,moveX:0,moveY:0,direction:""}};s();p();g.isFunction(a.left.on)?(a.left.on("touchstart click", u),a.right.on("touchstart click",v),a.dots.on("touchstart click",w)):(a.left.live("touchstart click",u),a.right.live("touchstart click",v),a.dots.live("touchstart click",w));(function(){function c(b){a.moving||(a.moving=!0,a.touch.started=!0,a.touch.x=b.originalEvent.touches[0].clientX,a.touch.y=b.originalEvent.touches[0].clientY,a.touch.moveX=a.touch.x,a.touch.moveY=a.touch.y)}function e(b){if(a.touch.started){a.touch.started=!1;a.moving=!1;b=a.touch.moveX-a.touch.x;var c=a.touch.moveY-a.touch.y; "move"!=a.effect||a.touchSimple||(a.horizontal?b>a.touchLength?l(!0):0<b?(a.curID-=1,0>a.curID&&(a.curID=a.itemsCount-1),a.touch.x=0,a.touch.moveX=b-a.moveWidth,k(!0)):b<-a.touchLength?k(!0):0>b&&(a.curID+=1,a.curID>a.itemsCount-1&&(a.curID=0),a.touch.x=0,a.touch.moveX=a.moveWidth+b,"next"==a.touch.direction&&a.mover.append(a.mover.find(a.itemsSelector+":first")),l(!0)):c>a.touchLength?l(!0):0<c?(a.curID-=1,0>a.curID&&(a.curID=a.itemsCount-1),a.touch.y=0,a.touch.moveY=c-a.moveHeight,k(!0)):c<-a.touchLength? k(!0):0>c&&(a.curID+=1,a.curID>a.itemsCount-1&&(a.curID=0),a.touch.y=0,a.touch.moveY=a.moveHeight+c,"next"==a.touch.direction&&a.mover.append(a.mover.find(a.itemsSelector+":first")),l(!0)));if("fade"==a.effect||a.touchSimple)a.horizontal?(b>a.touchLength&&l(!0),b<-a.touchLength&&k(!0)):(c>a.touchLength&&l(!0),c<-a.touchLength&&k(!0));a.touch.direction=""}}function d(b){a.touch.started&&(b.preventDefault(),a.touch.moveX=b.originalEvent.touches[0].clientX,a.touch.moveY=b.originalEvent.touches[0].clientY, "move"!=a.effect||a.touchSimple||(a.horizontal?(b=a.touch.moveX-a.touch.x,0<b&&(b>a.moveWidth&&(b=a.moveWidth,a.touch.moveX=a.touch.x+b),"prev"!=a.touch.direction&&(a.mover.prepend(a.mover.find(a.itemsSelector+":last")),a.touch.direction="prev")),"prev"==a.touch.direction&&a.mover.css("left",b-a.moveWidth+"px"),0>b&&(b<-a.moveWidth&&(b=-a.moveWidth,a.touch.moveX=a.touch.x+b),"next"!=a.touch.direction&&("prev"==a.touch.direction&&a.mover.append(a.mover.find(a.itemsSelector+":first")),a.touch.direction= "next")),"next"==a.touch.direction&&a.mover.css("left",b+"px")):(b=a.touch.moveY-a.touch.y,0<b&&(b>a.moveHeight&&(b=a.moveHeight,a.touch.moveY=a.touch.y+b),"prev"!=a.touch.direction&&(a.mover.prepend(a.mover.find(a.itemsSelector+":last")),a.touch.direction="prev")),"prev"==a.touch.direction&&a.mover.css("top",b-a.moveHeight+"px"),0>b&&(b<-a.moveHeight&&(b=-a.moveHeight,a.touch.moveX=a.touch.y+b),"next"!=a.touch.direction&&("prev"==a.touch.direction&&a.mover.append(a.mover.find(a.itemsSelector+":first")), a.touch.direction="next")),"next"==a.touch.direction&&a.mover.css("top",b+"px"))))}if(g.isFunction(a.mover.on))a.mover.on("touchstart",c);else a.mover.live("touchstart",c);if(g.isFunction(a.mover.on))a.mover.on("touchend",e);else a.mover.live("touchend",e);if(g.isFunction(a.mover.on))a.mover.on("touchmove",d);else a.mover.live("touchmove",d)})();a.autoStart&&q();a.autoStart&&a.stopOnHover&&m.mouseenter(r).mouseleave(function(){a.stopped||q()});this.stop=function(){r();a.stopped=!0};this.start=function(){q(); a.stopped=!1};this.next=k;this.prev=l;this.to=t;this.back=function(c){1<a.idHistory.length&&this.to(a.idHistory[1],c)};this.refresh=function(){s();p()};this.setParams=function(c){g.extend(a,c);this.refresh()};this.params=a;return this}})(jQuery);